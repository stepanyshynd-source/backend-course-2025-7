FROM node:20-alpine

# Робоча папка всередині контейнера
WORKDIR /app

# Копіюємо файли залежностей
COPY package*.json ./

# Встановлюємо залежності (тільки продакшн)
RUN npm install --omit=dev

# Копіюємо весь проєкт
COPY . .

# Сервер буде слухати порт 3000
EXPOSE 3000

# Запускаємо саме твій main.js з потрібними параметрами
# host = 0.0.0.0 (щоб було видно ззовні контейнера)
# port = 3000
# cache = cache
CMD ["node", "main.js", "-h", "0.0.0.0", "-p", "3000", "-c", "cache"]